<html>
	<head>
		<title>Discovering A Crash -- Jon Canady (dot com)</title>
		<link rel="stylesheet" href="/stylesheets/style.css" type="text/css" />
		<link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" />
		<link rel="alternate" type="application/atom+xml" href="/atom.xml">
	</head>
	<body>
		<div id="header">
	<h1>Jon Canady</h1>
	<ul>
		<li><a href="/">About</a></li>
		<li><a href="/articles/">Bloggery</a></li>
		<li><a href="http://github.com/joncanady">Projects</a></li>
	</ul>
</div>
		<div id="content">
			<h1>Discovering A Crash</h1>
			<h2>Jan 23, 2009</h2>
			
			
			
			<div id="alert">
				<p>This is an older post imported from my previous Wordpress blog. If you
				find any errors, <a href="mailto:jon@joncanady.com">let me 
				know</a>.</p>
			</div>
			
			
			
			<p>I generally create web applications. Things in PHP or Ruby that run for at most a minute, generate a web page, and then terminate.  So now that I've picked up iPhone development on the side, there's a lot to remember: pointers, memory management...</p>

<p>For example: let's say I want an array of words.  Well, if I were in PHP:</p>

<div class="highlight"><pre><span class="lineno">1</span> <span class="x">$list = array(&#39;These&#39;, &#39;Words&#39;);</span>
</pre>
</div>


<p>Ruby has a similar construct, but it also makes "give me an array of these words" easier:</p>

<div class="highlight"><pre><span class="lineno">1</span> <span class="n">list</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;these&#39;</span><span class="p">,</span> <span class="s1">&#39;words&#39;</span><span class="o">]</span>
<span class="lineno">2</span> <span class="c1"># or</span>
<span class="lineno">3</span> <span class="n">list</span> <span class="o">=</span> <span class="sx">%w(these words)</span>
</pre>
</div>


<p>So how do I do this in ObjC?  I thought this worked:</p>

<div class="highlight"><pre><span class="lineno">1</span> <span class="n">list</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithObjects:</span><span class="s">@&quot;These&quot;</span><span class="p">,</span> <span class="s">@&quot;Words&quot;</span><span class="p">];</span>
</pre>
</div>


<p>But damn was I wrong.  It turns out that <em>that</em> will crash your app.  What you <em>should</em> be doing is:</p>

<div class="highlight"><pre><span class="lineno">1</span> <span class="n">list</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithObjects:</span><span class="s">@&quot;These&quot;</span><span class="p">,</span> <span class="s">@&quot;Words&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>
</pre>
</div>


<p>Not ending an <code>NSMutableArray</code> with a <code>nil</code> is apparently frowned upon in polite ObjC society.<br/>
</p>

<p>And that's your lesson for the day: read the API docs <em>first</em> instead of wasting thirty minutes of your life poring over code wondering where you made a mistake.  Like I did.</p>


			<div>
				
				<br />
				
				<span>
					<a rel="next" href="/2009/01/23/wordpress-xmlrpc-angle-bracket-fix/" 
					title="View Wordpress XMLRPC Angle-bracket Fix"
					>Next: Wordpress XMLRPC Angle-bracket Fix &rarr;</a>
				</span>
				
			</div> 

			<div id="footer">
	<p>Powered by <a href="http://github.com/mojombo/jekyll">Jekyll</a>; your visit consumed no database resources, and didn't need parsing. Isn't that awesome?</p>
	<p>Blog post text is covered by this <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/us/">Creative Commons</a> license, everything else is mine.</p>
</div>

		</div>
	</body>
</html>